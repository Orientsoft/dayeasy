!function(i){i.fn.autoMail=function(e){var l=i.extend({},i.fn.autoMail.defaults,e);return this.each(function(){function e(e){i("#mailBox li").removeClass("cmail").eq(e).addClass("cmail")}var t=i(this),a=i.meta?i.extend({},l,t.data()):l,o=t.offset().top+t.height()+6,n=t.offset().left,f=i('<div id="mailBox" style="top:'+o+"px;left:"+n+"px;width:"+t.width()+'px"></div>');i("body").append(f);var d=a.emails,u=function(e){if(e.attr("autocomplete","off"),""!=e.val()){for(var l="<p>请选择邮箱类型</p><ul>",t=0;t<d.length;t++)l+="<li>"+e.val()+"@"+d[t]+"</li>";l+="</ul>",f.html(l).show(0)}else f.hide(0);i("#mailBox li").hover(function(){i("#mailBox li").removeClass("cmail"),i(this).addClass("cmail")},function(){i(this).removeClass("cmail")}).click(function(){e.val(i(this).html()),f.hide(0)})},s=-1;t.focus(function(){-1==t.val().indexOf("@")?u(t):f.hide(0)}).blur(function(){setTimeout(function(){f.hide(0)},1e3)}).keyup(function(l){-1==t.val().indexOf("@")?40==l.keyCode?(s++,s>=i("#mailBox li").length&&(s=0),e(s)):38==l.keyCode?(s--,0>s&&(s=i("#mailBox li").length-1),e(s)):13==l.keyCode?s>=0&&(t.val(i("#mailBox li").eq(s).html()),f.hide(0)):(s=-1,u(t)):f.hide(0)}).keydown(function(i){return 13==i.keyCode?!1:void 0})})},i.fn.autoMail.defaults={emails:[]}}(jQuery);