$(function(){$("body").append('<div id="ajaxModel" style="z-index: 10000;position: absolute;height: 100%;width: 100%;left: 0;top: 0;" class="hide"><div class="text-center"><span id="dyloading" style="position:fixed; z-index: 1000;top: 50%;left:50%;"><i class="fa fa-spin fa-spinner fa-3x" ></i><br /><br />正在加载，请稍后...</span></div></div>'),$.ajaxSetup({beforeSend:function(e){$("#ajaxModel").removeClass("hide")},complete:function(a,i){$("#ajaxModel").addClass("hide");var s=e.getCurrentData();if(s){var t;t=$(".topic-tab-content-1").hasClass("show")?$("#questionListDiv").children("div.q-item"):$("#paperDetails").find("#questionsDiv").children("div.q-item"),$.each(t,function(e,a){var i=$(a).children("div.f-qitem"),t=i.data("qid");$.each(s,function(e,a){a&&$.each(a,function(e,a){a&&a.QId==t&&i.children("div.g-mark").children("span").removeClass("g-icon-15").addClass("g-icon-14")})})})}}});var e=$.TestBar(options),a={areaInit:function(){var e={"默认":["全国"],"省":["四川","广东","湖南","浙江","江苏","山东","福建","甘肃","河南","河北","吉林","陕西","山西"],ABC:["北京","巴中","重庆","成都"],DEF:["达州"],GHJ:["杭州","淮安"],KLM:["兰州","莱芜","龙岩","眉山"],NPQ:["南通","南充","内江","宁夏回族自治区"],RST:["遂宁","天津"],WXY:["武汉","威海","湘潭","扬州","雅安"],Z:["自贡"]};$.each(e,function(e,a){var i="<li><label>"+e+'：</label><div class="f-fl u-g-1">',s="";$.each(a,function(e,a){var i=a;"全国"==a&&(i="-1"),s+='<span data-area="'+i+'">'+a+"</span>"}),i+=s,i+="</div></li>",$("#areaDiv").children("ul").append(i)})},selectYearClick:function(){return $("#yearDiv").toggleClass("hide"),$("#areaDiv").addClass("hide"),!1},selectAreaClick:function(){return $("#areaDiv").toggleClass("hide"),$("#yearDiv").addClass("hide"),!1},yearChange:function(){$("#yearDiv").addClass("hide");var e=$(this).text();if($("#selectYear").children("span").text()==e)return!1;var i=$(this).data("year");return $("#selectYear").children("span").data("year",i).text(e),a.questionSearch(),!1},areaChange:function(){$("#areaDiv").addClass("hide");var e=$(this).text();if($("#selectArea").children("span").text()==e)return!1;var i=$(this).data("area");return $("#selectArea").children("span").data("area",i).text(e),a.questionSearch(),!1},noStarClick:function(){return $(this).hasClass("z-sel")||$(this).addClass("z-sel"),$("#starValue").val(-1),$(".q-star").raty("setScore",$("#starValue").val()),a.questionSearch(),!1},quSortChange:function(){$(this).addClass("z-sel").siblings().removeClass("z-sel");var e=$(this).data("sort");return $("#sortValue").val(e),a.questionSearch(),!1},qTypeChange:function(){$(this).addClass("z-sel").siblings().removeClass("z-sel");var e=$(this).data("qtype");return $("#qtypeValue").val(e),a.questionSearch(),!1},showMoreType:function(){var e=$(this).children("i");e.hasClass("g-icon_13")?(e.removeClass("g-icon_13").addClass("g-icon_1"),$(this).children("span").text("收起")):(e.removeClass("g-icon_1").addClass("g-icon_13"),$(this).children("span").text("更多")),$(this).prevAll("a.qtype-more").toggleClass("hide")},questionChoose:function(){var a=$(this).children("div.g-mark").children("span"),i=a.data("type"),s=a.data("qid");if(a.hasClass("g-icon-15")){var t=e.add(i,s);t&&a.removeClass("g-icon-15").addClass("g-icon-14")}else e.del(i,s),a.removeClass("g-icon-14").addClass("g-icon-15")},qSourceTypeChoose:function(){$(this).addClass("z-sel").siblings().removeClass("z-sel");var e=$(this).data("sourcetype");return $("#qSourceTypeValue").val(e),0>e?($("#selectYear").children("span").data("year","-1").text("全部年份"),$("#selectArea").children("span").data("area","-1").text("全国"),$(this).siblings("div.g-source").addClass("hide")):$(this).siblings("div.g-source").removeClass("hide"),a.questionSearch(),!1},questionSearch:function(){var e=$("#starValue").val(),a=$("#sortValue").val(),i=$("#qtypeValue").val(),s=$("#kp").val(),t=$("#queryKey").val(),r=$("#qSourceTypeValue").val(),n=$("#selectYear").children("span").data("year"),l=$("#selectArea").children("span").data("area");$("#questionListDiv").load("/paper/questionlist",{star:e,sort:a,qtype:i,kp:s,queryKey:t,qSourceType:r,year:n,area:l},function(){})},gradeChange:function(){$(this).addClass("z-sel").siblings().removeClass("z-sel");var e=$(this).data("value");return $("#gradeValue").val(e),a.paperSearch(),!1},sourceChange:function(){$(this).addClass("z-sel").siblings().removeClass("z-sel");var e=$(this).data("value");return $("#sourceValue").val(e),a.paperSearch(),!1},paperSearch:function(){var e=$("#gradeValue").val(),a=$("#sourceValue").val(),i=$("#paperQueryKey").val(),s=$("#kp").val();return $("#paperDataDiv").load("/paper/paperdata",{grade:e,source:a,key:i,kp:s}),!1},paperDetails:function(){var e=$(this).data("pid"),a=$("#kp").val();$("#choosePaperDiv").addClass("hide"),$("#paperDetails").load("/paper/showpaperdetail",{paperId:e,kp:a})},addAllPaperQuestion:function(){var a=$("#paperDetails").find("#questionsDiv").children("div.q-item");$.each(a,function(a,i){var s=$(i).children("div.f-qitem").children("div.g-mark").children("span"),t=s.data("type"),r=s.data("qid"),n=e.add(t,r);n&&s.removeClass("g-icon-15").addClass("g-icon-14")})}};a.questionSearch(),a.areaInit(),$("#noStar").bind("click",a.noStarClick),$("#questionSort").children("a").bind("click",a.quSortChange),$("#qtypes").children("a").bind("click",a.qTypeChange),$("#qSourceType").children("a").bind("click",a.qSourceTypeChoose),$("#btn_Search").bind("click",a.questionSearch),$("#showMoreType").bind("click",a.showMoreType),$("#questionListDiv,#paperDetails").delegate(".f-qitem","click",a.questionChoose),$("#selectYear").bind("click",a.selectYearClick),$("#selectArea").bind("click",a.selectAreaClick),$("#yearDiv span").bind("click",a.yearChange),$("#areaDiv span").bind("click",a.areaChange),$("#queryKey").bind("focus",function(){$(this).parent("div.g-input").addClass("focus")}),$("#queryKey").bind("blur",function(){$(this).parent("div.g-input").removeClass("focus")}),$("#paperQueryKey").bind("focus",function(){$(this).parent("div.g-input").addClass("focus")}),$("#paperQueryKey").bind("blur",function(){$(this).parent("div.g-input").removeClass("focus")}),$("#gradeChange").children("a").bind("click",a.gradeChange),$("#sourceChange").children("a").bind("click",a.sourceChange),$("#btn_PaperSearch").bind("click",a.paperSearch),$("#paperDataDiv").delegate("table.title-table tr:not(:first)","click",a.paperDetails),$("#paperDetails").delegate("#btn_backList","click",function(){$("#choosePaperDiv").removeClass("hide"),$("#paperDetails").empty()}),$("#paperDetails").delegate("#addAllQuestion","click",a.addAllPaperQuestion),$(".q-star").raty({path:singer.sites["static"]+"/plugs/raty/images/",score:0,hints:["容易","普通","一般","困难","极难"],click:function(e,i){$("#starValue").val(e),$("#noStar").removeClass("z-sel"),a.questionSearch()}}),$(document).bind("click",function(){$("#yearDiv").addClass("hide"),$("#areaDiv").addClass("hide")}),document.onkeydown=function(e){var a=document.all?window.event:e;13==a.keyCode&&($(".topic-tab-content-1").hasClass("show")?$("#btn_Search").click():$("#choosePaperDiv").hasClass("hide")||$("#btn_PaperSearch").click())}});