!function(e,t){{var n=!1;t.getLogger("js/base/site-base")}e.ajaxPrefilter(function(e,t,n){}),e(document).ajaxComplete(function(e,o){var a=o.responseJSON;return!n&&a&&a.login?(n=!0,t.alert?t.alert("登录已失效，请重新登录！",function(){window.top.location.href=a.url}):window.top.location.href=a.url,!1):void 0}),t._mix(t,{deyi:function(){return window.DEYI||{}}(),sites:function(){return(window.DEYI||{}).sites||{}}()}),e(".top-menu").mouseenter(function(){e(this).addClass("menu-hover")}).mouseleave(function(){e(this).removeClass("menu-hover")}),e(".b_logout").bind("click",function(){return e(window).unbind("beforeunload.question"),location.href=t.sites.login+"/logout",!1});var o,a=/([a-z]+)\.[a-z]+\.[a-z]+(?:\/([a-z0-9]+)\/?)?/gi;if(t.uri().app?o=t.uri().app:(location.href.match(a),o=(RegExp.$1&&"www"!=RegExp.$1?RegExp.$1:RegExp.$2)||"home"),e("nav li a").each(function(t){this.getAttribute("href").indexOf(o.toLowerCase())>=0&&e("nav li:eq("+t+")").addClass("active")}),t.deyi.goTop){var r,i=e('<div class="go-top"><i class="go-Top-icon"></i><i class=" fa-angle-topb">返回顶部</i></div>'),s=e(window);e("body").append(i),r=s.width()<1e3?10:Math.abs((s.width()-1e3)/2-60),i.css("right",r),i.bind("click.goTop",function(){e("body,html").animate({scrollTop:0},"fast")}).hover(function(){e(this).toggleClass("go-top-hover")}),s.bind("scroll.goTop",function(){var t=e(this).scrollTop();t>100?i.fadeIn():i.fadeOut()})}t._mix(t,{makeThumb:function(e,t,n){return e?(t=t||50,n=n||"auto",e.replace(/(\.[a-z]{3,4})$/gi,"_s"+t+"x"+n+"$1")):e},formatNum:function(e){if(!/^(\+|-)?\d+(\.\d+)?$/.test(e))return e;var t=(new RegExp).compile("(\\d)(\\d{3})(,|\\.|$)");for(e+="";t.test(e);)e=e.replace(t,"$1,$2$3");return e},page:function(t){var n,o,a=e.extend({},{current:0,size:15,total:0},t||{}),r={prev:!1,next:!1,current:1,data:[]};if(a.total<=0||a.size<=0)return r;if(n=Math.ceil(a.total/a.size),2>n)return r;if(a.current<0&&(a.current=0),a.current>=n&&(a.current=n-1),r.prev=a.current>0,r.next=a.current<n-1,r.current=a.current+1,9>n){for(o=0;n>o;o++)r.data.push({page:o+1,isActive:a.current==o});return r}for(r.data.push({page:1,isActive:0==a.current}),a.current-3>1&&r.data.push({page:-1}),o=a.current-3;o<a.current+4;o++)1>o||o>n-2||r.data.push({page:o+1,isActive:a.current==o});return a.current+5<n&&r.data.push({page:-1}),r.data.push({page:n,isActive:a.current==n-1}),r},stages:[{id:1,name:"小学"},{id:2,name:"初中"},{id:3,name:"高中"}],open:function(t){var n=e("<a>");n.attr("href",t),n.attr("target","_blank"),e("body").append(n),n[0].click(),n.remove()},templates:{},loadTemplate:function(n,o){var a=t.format("{0}/data/templates/{1}.html",t.sites["static"],n);e.get(a,function(n){for(var a=e(n),r=0;r<a.length;r++){var i=a.eq(r),s=i.attr("id"),l=(i.html()||"").replace(/^([\s\n]+)|([\s\n]+)$/i,"");s&&(t.templates[s]=l,"undefined"!=typeof template&&(template.cache[s]=template.compile(l,{filename:s})))}o&&t.isFunction(o)&&o.call(this)})},render:function(e,n){return t.templates.hasOwnProperty(e)&&"undefined"!=typeof template?(template.config("compress",!0),n.sites=t.sites,template(e,n)):""}}),e.fn.extend({placeholder:function(t){return t=e.extend({placeholderColor:"#ACA899",isUseSpan:!1,onInput:!0},t),e(this).each(function(){var n=this,o="placeholder"in document.createElement("input");if(!o){var a=e(n).attr("placeholder"),r=e(n).css("color");if(0==t.isUseSpan)e(n).focus(function(){var t=new RegExp("^"+a+"$|^$");t.test(e(n).val())&&e(n).val("").css("color",r)}).blur(function(){e(n).val()==a?e(n).css("color",r):0==e(n).val().length&&e(n).val(a).css("color",t.placeholderColor)}).trigger("blur");else{var i=e('<span class="wrap-placeholder" style="position:absolute; display:inline-block; overflow:hidden; color:'+t.placeholderColor+"; width:"+e(n).outerWidth()+"px; height:"+e(n).outerHeight()+'px;">'+a+"</span>");if(i.css({"margin-left":e(n).css("margin-left"),"margin-top":e(n).css("margin-top"),"font-size":e(n).css("font-size"),"font-family":e(n).css("font-family"),"font-weight":e(n).css("font-weight"),"padding-left":parseInt(e(n).css("padding-left"))+2+"px","line-height":"textarea"==n.nodeName.toLowerCase()?e(n).css("line-weight"):e(n).outerHeight()+"px","padding-top":"textarea"==n.nodeName.toLowerCase()?parseInt(e(n).css("padding-top"))+2:0}),e(n).before(i.click(function(){e(n).trigger("focus")})),0!=e(n).val().length&&i.hide(),t.onInput){var s="object"==typeof n.oninput?"input":"propertychange";e(n).bind(s,function(){i[0].style.display=0!=e(n).val().length?"none":"inline-block"})}else e(n).focus(function(){i.hide()}).blur(function(){/^$/.test(e(n).val())&&i.show()})}}}),this}}),e("[placeholder]").placeholder()}(jQuery,SINGER);