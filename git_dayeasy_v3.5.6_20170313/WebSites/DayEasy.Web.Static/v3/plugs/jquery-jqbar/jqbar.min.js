!function(a,e){a.fn.extend({jqbar:function(r){var n=a.extend({animationSpeed:2e3,barLength:250,orientation:"h",barWidth:30,barColor:"red",label:"&nbsp;",value:1e3,type:1,allscore:150,average:0,averageScoreDiff:0},r);return this.each(function(){function r(r){var i=parseInt(r.attr("data-value"));i>100&&(i=100,e.msg("最大值"+n.allscore));var b=n.barLength*i/100;if("h"==n.orientation)r.animate({width:b},{duration:2e3,step:function(a){var e=parseInt(a/n.barLength*100);isNaN(e)&&(e=0),l.find(".bar-percent").html(e+" ")}});else{var o=n.barLength-n.barLength*i/100;r.animate({top:o},{duration:2e3,step:function(a){var e=parseInt((n.barLength-parseInt(a))/n.barLength*100);isNaN(e)&&(e=0),1==n.type?(l.find(".bar-percent").html(s),l.find(".bar-max-min b").html(n.averageScoreDiff)):2==n.type?l.find(".bar-percent").html(p+"%"):3==n.type&&l.find(".bar-percent").html(s)}}),1==n.type?(l.find(".bar-percent").animate({top:o-t-18},2e3),l.find(".bar-max-min").animate({top:o-t-25},2e3)):l.find(".bar-percent").animate({top:o-t-18},2e3),(1==n.type||2==n.type)&&setTimeout(function(){a(".average").css("display","block"),a(".average").animate({opacity:1},2e3)},2e3)}}var t=0,l=a(this);if(0==n.average&&(n.average=10),n.value<parseInt(n.average)&&(n.barColor="#ed5565"),1==n.type||3==n.type){var s=n.value;n.value=n.value/n.allscore*100}if(2==n.type)var p=n.value;if("h"==n.orientation){console.log("横向统计-暂无开发"),l.addClass("jqbar horizontal").append('<span class="bar-label"></span><span class="bar-level-wrapper"><span class="bar-level"></span></span><span class="bar-percent"></span>');var i=(l.find(".bar-label").html(n.label),l.find(".bar-level").attr("data-value",n.value)),b=l.find(".bar-level-wrapper");i.css({height:n.barWidth,width:0,backgroundColor:n.barColor});var o=l.find(".bar-percent");o.html("0")}else{1==n.type?l.addClass("jqbar vertical").append('<span class="bar-percent"></span><span class="bar-max-min">相差：<b>43.5</b>分</span><span class="bar-level-wrapper"><span class="bar-level"></span></span><span class="bar-label"></span>'):l.addClass("jqbar vertical").append('<span class="bar-percent"></span><span class="bar-level-wrapper"><span class="bar-level"></span></span><span class="bar-label"></span>');var i=(l.find(".bar-label").html(n.label),l.find(".bar-level").attr("data-value",n.value)),b=l.find(".bar-level-wrapper");l.css("height",n.barLength),i.css({height:n.barLength,top:n.barLength,width:n.barWidth,backgroundColor:n.barColor}),b.css({height:n.barLength,width:n.barWidth});var o=l.find(".bar-percent");if(o.html("0"),t=parseInt(o.outerHeight()),o.css({top:n.barLength-t+"px"}),1==n.type){var c=l.find(".bar-max-min");c.css({top:n.barLength-t+"px"})}}r(i)})},average:function(e){var r=a.extend({allscore:150,average:150},e),n=r.average/r.allscore;return this[0].style.bottom=250*n+79+"px"}})}(jQuery,SINGER);