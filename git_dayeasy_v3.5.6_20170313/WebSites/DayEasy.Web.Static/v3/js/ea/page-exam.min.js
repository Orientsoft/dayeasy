!function(t,i){var n=function(n,e,c,l){if(!n||!i.inArray(e,[2,4]))return void i.alert("数据异常",function(){l&&l.call(this)});var a,s;switch(e){case 2:a="发布后，<b>参考学生</b>可在相应的<b>班级圈主页动态</b>中<br/>查看自己本次考试的成绩信息。确认发布？";break;case 4:a="推送后，<b>各科目教师</b>可以在<b>【报表中心】->【教务处报表】</b>中<br/>查看本次考试的统计报表。确认推送？"}i.confirm(a,function(){s()},function(){l&&l.call(this)}),s=function(){t.post("/ea/publish-exam",{examId:n,role:e},function(t){t.status?i.msg(2==e?"发布成功":"推送成功",2e3,function(){c&&c.call(this)}):i.alert(t.message,function(){l&&l.call(this)})})}};t(".btn-send").bind("click",function(){var i=t(this),e=i.parents("tr").data("eid");i.blur(),i.disableField("稍后.."),n(e,4,function(){i.disableField("已推送")},function(){i.undisableFieldset()})}),t(".btn-publish").bind("click",function(){var i=t(this),e=i.parents("tr").data("eid");i.blur(),i.disableField("稍后.."),n(e,2,function(){i.disableField("已发布")},function(){i.undisableFieldset()})});var e=null;t(".dy-content").on("click",".pop-clicks",function(){var n=t(this),c=n.parents("tr").data("eid"),l=n.text(),a=template("pop-select-type",{examId:c,title:l});return e=i.dialog({fixed:!0,width:500,height:300,content:a}).showModal(),!1}),t(document).on("click",".pop-select-close",function(){e.close().remove()})}(jQuery,SINGER);