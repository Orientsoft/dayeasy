!function(t,e){var a,n,i,o,s=t(".dy-list").data("aid"),l={};i=function(i){var o=["userCount","classCount","paperCount","knowledgeCount","reportCount"];e.each(o,function(e){t("#"+e).html(i[e]||0)}),a(i.subjects),n(i.classList)},o=function(a,n){var o={id:s,area:a};n&&(o.refresh=!0),t.get("/ea/examination-map",o,function(t){l[a]=t,i(t),e.pageLoaded()})},a=function(a){var n=[];return a?(e.each(a,function(t,e){n.push({name:e,y:t})}),n[0].sliced=!0,n[0].selected=!0,void t("#container-chart-left").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:null},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{size:160,innerSize:"100",colors:["#e8525d","#486378","#2cc49e","#ffcb2d","#2cc49e","#ffcb2d"],allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.y} 次",style:{color:"#666",fontWeight:"normal"}}}},series:[{type:"pie",name:"学科分布",data:n}]})):(t("#container-chart-left").html('<div class="chart-show-not"><img src="'+e.sites["static"]+'/v3/image/ea/chart-showNot-map.png" alt=""></div>'),!1)},n=function(a){var n,i,o=t("#container-left"),s=t("#container-tab-left");return s.empty(),a&&a.length?(e.each(a,function(a){n=t(e.format('<option value="{0}">{0}</option>',a.key)),n.data("chart",a.users),s.append(n)}),s.show(),i=function(t){var a={type:1,colors:["#2cc49e","#ffcb2d","#e8525d","#486378"],className:[],data:[]},n=t.data("chart");e.each(n,function(t){a.className.push(t.key),a.data.push({y:t.value,className:t.key})}),e.binghighcharts({chartData:n,data:a,chart:o,select:s,nothingText:"班级圈暂无考试"},function(){var t=Math.max(50*a.className.length,o.width());o.highcharts({chart:{type:"category",width:t},title:{text:null},colors:a.colors,tooltip:{formatter:function(){return e.format("{0}:{1}人次",this.point.className,this.y)}},xAxis:{categories:a.className,tickWidth:0,text:null,labels:{useHTML:!0,formatter:function(){var t=/(\d+班)/gi.exec(this.value),a=t&&t.length?t[1]:this.value.substr(this.value.length-2,this.value.length);return e.format('<span title="{0}">{1}</span>',this.value,a)}}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",pointPadding:.2,borderWidth:0,pointWidth:24},series:{pointPadding:0,groupPadding:0,borderWidth:0,shadow:!1,pointWidth:20}},yAxis:{stackLabels:{enabled:!0,style:{color:"#656d78","font-weight":"normal"}},gridLineWidth:0,labels:{enabled:!1},title:{text:null}},series:[{type:"column",name:"班次分布",colorByPoint:!0,data:a.data,showInLegend:!1}]})})},void s.change(function(){i(s.find("option:selected"))}).change()):(o.html(e.showNothing()),s.hide(),!1)},e._mix(e,{binghighcharts:function(a,n){var i=[],o=0;e.each(a.chartData,function(t){i.push(t.value)}),t.each(i,function(t){o+=i[t]}),o>0?n&&n.call(this):a.chart.html(e.showNothing({word:a.select.val()+a.nothingText,css:{height:"220px","line-height":"220px"}}))}}),t(".ui-tab-nav li").bind("click",function(){var a=t(this),n=a.data("area");return a.hasClass("on")?!1:(a.addClass("on").siblings().removeClass("on"),l.hasOwnProperty(n)?(i(l[n]),!1):(e.pageLoading(),void o(n)))}),e.pageLoading(),o(0)}(jQuery,SINGER);