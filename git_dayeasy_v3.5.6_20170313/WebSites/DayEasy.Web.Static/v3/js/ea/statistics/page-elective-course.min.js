!function(t,a){var e,n,i,o,c,r=t(".dy-list").data("aid");a._mix(a,{chartFun:function(e,n,i){var o,c,r=n.className.length,s=t("#"+e);switch(n.type){case 1:s.width(44*Math.max(r,10));break;case 2:s.height(44*Math.max(r,5));break;default:console.log("没有你调用的树状类型类型")}return c={title:{text:null},colors:n.colors,xAxis:{categories:n.className,text:null,labels:{useHTML:!0,formatter:n.formatter||function(){return this.value}},tickWidth:0},tooltip:{formatter:function(){return a.format("{0}:{1}人",this.x,this.y)}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",pointPadding:.2,borderWidth:0,pointWidth:24},series:{pointPadding:0,groupPadding:0,borderWidth:0,shadow:!1,pointWidth:20}},yAxis:{stackLabels:{enabled:!0,style:{color:"#656d78","font-weight":"normal"}},gridLineWidth:0,labels:{enabled:!1},title:{text:null},tickWidth:0},series:[{type:"column",name:"人数",colorByPoint:!0,data:n.data,showInLegend:!1}]},o=t.extend({},c,i||{}),s.highcharts(o)},binghighcharts:function(e,n){var i=new e,o=i.par,c=i.par.data,r=0;t.each(c,function(t){r+=c[t]}),r>0?(o.box.css("display","block"),o.people.find(".dy-nothing").remove(),n&&n.call(this)):(o.chart.empty(),o.box.css("display","none"),o.people.find(".dy-nothing").remove(),o.people.append(a.showNothing({word:o.select.val()+o.nothingText,css:{margin:"0 20px",width:"440px",height:"220px",lineHeight:"220px"}})))}}),n=function(){if(c){var e=["studentCount","teacherCount","classCount","colleagueCount","visitCount","targetCount"];a.each(e,function(a){t("#"+a).html(c[a]||0)}),i(),o(),t(".last-refresh").find("span").html(c.lastRefresh)}},i=function(){if(!c.classList)return!1;var e,n,i=t("#container-tab-left");i.empty(),a.each(c.classList,function(n){e=t(a.format('<option value="{0}">{0}</option>',n.key)),e.data("chart",n.users),i.append(e)}),n=function(e){var n={type:1,id:"container-left",colors:["#e8525d","#486378"],className:[],data:[],dataY:[],formatter:function(){var t=/(\d+班)/gi.exec(this.value),e=t&&t.length?t[1]:this.value.substr(this.value.length-2,this.value.length);return a.format('<span title="{0}">{1}</span>',this.value,e)}},o=e.data("chart");a.each(o,function(t){n.className.push(t.key),n.data.push({y:t.value,name:t.key}),n.dataY.push(t.value)}),a.binghighcharts(function(){var a=this;a.par={data:n.dataY,chart:t("#"+n.id),select:i,people:t(".class-people"),box:t(".container-box-x"),nothingText:"班级圈暂无学生"}},function(){a.chartFun(n.id,n)})},i.change(function(){n(i.find("option:selected"))}).change()},o=function(){if(!c.colleagueList)return!1;var e,n,i=t("#container-tab-right");i.empty(),a.each(c.colleagueList,function(n){e=t(a.format('<option value="{0}">{0}</option>',n.key)),e.data("chart",n.users),i.append(e)}),n=function(e){var n={type:2,id:"container-right",colors:["#2cc49e","#ffcb2d"],className:[],data:[]},o={chart:{inverted:!0,polar:!1},subtitle:{text:null}},c=e.data("chart");a.each(e.data("chart"),function(t){n.className.push(t.key),n.data.push(t.value)}),a.binghighcharts(function(){var a=this;a.par={chartData:c,data:n.data,chart:t("#"+n.id),select:i,people:t(".teacher-people"),box:t(".container-box-y"),nothingText:"同事圈暂无老师"}},function(){a.chartFun(n.id,n,o)})},i.change(function(){n(i.find("option:selected"))}).change()},e=function(e){a.pageLoading();var i={id:r,t:Math.random()};e&&(i.refresh=!0),t.get("/ea/agency-survey",i,function(t){c=t,n(),a.pageLoaded()})},e(),t(".last-refresh").find("i").bind("click",function(){e(!0)})}(jQuery,SINGER);