!function(t,e){var a,o,n,i,r,s={},l=t(".dy-list").data("aid");e._mix(e,{showChartStyle:function(e,a,o,n){var i=e.parents("li");i.find(".amend-total").remove(),i.append('<div class="amend-total"><span class="total-left">'+a[0]+'</span><span class="total-right">'+a[1]+"</span></div>");var r={yAxis:{max:a[1].total,stops:[[1,n]],tickPositions:[0,a[1].total],labels:{enabled:!1}}},s=t.extend({},o,r||{});return s}}),a=function(a){var o=["errors","errorKnowledge","variants","variantDownload","tutors","paperDownload"];e.each(o,function(e){t("#"+e).html(a[e]||0)}),n(a.errorDetail),i(a.errorAnalysis,a.errorDownload,a.errorPass),r(a.subjectAnalysis)},o=function(o,n){var i={id:l,area:o};n&&(i.refresh=!0),t.get("/ea/agency-remedy",i,function(t){s[o]=t,a(t),e.pageLoaded()})},n=function(a){var o=t("#container-left");if(t(".box-people .dy-nothing").remove(),!a)return e.loading.done(t(".class-people")),o.parents(".box-people").find(".m-title").after(e.showNothing({css:{width:"620px",margin:"0 auto",height:"240px",lineHeight:"240px"}})),!1;var n={colors:["#2cc49e","#ffcb2d","#e8525d","#486378"],subjects:[],data:[]};e.each(a,function(t,e){n.subjects.push(e),n.data.push(t)});var i=Math.max(50*n.subjects.length,o.width());o.highcharts({chart:{width:i},title:{text:null},colors:n.colors,xAxis:{categories:n.subjects,text:null,tickWidth:0},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",pointPadding:.2,borderWidth:0,pointWidth:24},series:{pointPadding:60,groupPadding:0,borderWidth:0,shadow:!1,pointWidth:30}},yAxis:{stackLabels:{enabled:!0,style:{color:"#656d78","font-weight":"normal"}},gridLineWidth:0,labels:{enabled:!1},title:{text:null}},series:[{type:"column",name:"错题数",colorByPoint:!0,data:n.data,showInLegend:!1}]})},i=function(a,o,n){var i,r,s={chart:{type:"solidgauge",height:250},title:null,pane:{center:["50%","80%"],size:"150%",startAngle:-90,endAngle:90,background:{backgroundColor:"#96e2cf",innerRadius:"70%",outerRadius:"100%",borderColor:"#96e2cf",shape:"arc"}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0)",borderWidth:0,pointFormatter:function(){return'<div class="d-chart-tip">'+this.series.name+": <b>"+this.num+"/"+this.total+"</b></div>"},useHTML:!0,style:{zIndex:88,display:"none"}},credits:{enabled:!1},yAxis:{min:0,max:100,stops:[[1,"#2cc49e"]],lineWidth:0,startOnTick:!1,endOnTick:!1,minorTickInterval:null,tickPixelInterval:400,tickWidth:0,title:{y:0},labels:{y:16,align:"center",useHTML:!0,formatter:function(){return"<b>"+this.value+"</b>"}}},plotOptions:{solidgauge:{dataLabels:{y:0,borderWidth:0,useHTML:!0,formatter:function(){return'<div class="d-chart-center">'+this.point.percent.toFixed(1)+"%</div>"}},mouseOver:function(){this.tooltip.show()}}},series:[{name:"",data:[],innerRadius:"70%"}]},l=t("#analysisChart"),c=t("#downloadChart"),d=t("#passChart"),h=0;if(i=function(e,a){var o=t.extend(!0,{},s,a||{});e.highcharts(o)},a?(r=100*a.count/a.total,i(l,{chart:{height:250},yAxis:{max:a.total,tickPositions:[0,a.total]},series:[{name:"错题分析",data:[{y:Math.max(a.count,a.total*h),percent:r,total:a.total,num:a.count}],innerRadius:"70%"}],pane:{center:["50%","80%"],size:"150%",startAngle:-90,endAngle:90,background:{backgroundColor:"#96e2cf",innerRadius:"70%",outerRadius:"100%",borderColor:"#96e2cf",shape:"arc"}}})):l.html(e.showNothing({css:{width:"620px",margin:"0 auto",height:"240px",lineHeight:"240px"}})),o){var r=100*o.count/o.total,u={chart:{height:100},pane:{background:{backgroundColor:"#f4a9ae",borderColor:"#f4a9ae"}},yAxis:{max:o.total,stops:[[1,"#e8525d"]],tickPositions:[0,o.total]},plotOptions:{solidgauge:{dataLabels:{y:10}}},series:[{name:"错题下载",data:[{y:Math.max(o.count,o.total*h),percent:r,total:o.total,num:o.count}]}]},p=e.showChartStyle(c,[0,n.total],u,"#e8525d");i(c,p)}else c.html(e.showNothing());if(n){var r=100*n.count/n.total,u={chart:{height:100},pane:{background:{backgroundColor:"#ffe596",borderColor:"#ffe596"}},yAxis:{max:n.total,tickPositions:[0,n.total],stops:[[1,"#ffcb2d"]]},plotOptions:{solidgauge:{dataLabels:{y:10}}},series:[{name:"错题过关",data:[{y:Math.max(n.count,n.total*h),percent:r,total:n.total,num:n.count}]}]},p=e.showChartStyle(d,[0,o.total],u,"#ffcb2d");i(d,p)}else d.html(e.showNothing())},r=function(a){var o=t("#subjectAnalysis");if(o.empty(),!a||!a.length)return!1;var n,i=[["#ffcb2d","#ffd34c","#ffdc71","#ffe494","#ffedb7","#fff5d5"],["#e8525d","#eb6c75","#ef8a91","#f3a7ac","#f7c4c8","#fadcdf"],["#2cc49e","#4bcdac","#70d7bd","#93e1ce","#b7ebde","d5f3ec"],["#486378","#637a8c","#8395a3","#a2afba","#c1cad1","dae0e4"]],r=["dy-icon-chinese","dy-icon-math","dy-icon-english","dy-icon-physics","dy-icon-chemistry","dy-icon-politics","dy-icon-history","dy-icon-geography","dy-icon-biology","dy-icon-computer"];n=function(a){if(!a)return!1;var n=[];e.each(a.users,function(t){n.push([t.key,t.value])});var s=i[(a.id-1)%i.length],l={chart:{backgroundColor:"transparent",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,width:480,marginRight:200,height:200},title:{text:null},credits:{enabled:!1},tooltip:{pointFormat:"<b>{point.y}次</b>"},legend:{enabled:!0,useHTML:!0,width:150,maxHeight:200,align:"right",floating:!0,layout:"vertical",symbolRadius:0,x:-50,y:-40},plotOptions:{pie:{size:160,innerSize:"100",colors:s,allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}},showInLegend:!0}},series:[{type:"pie",name:a.name,data:n}]},c=t('<div class="d-chart-item">');o.append(c),c.highcharts(l),0==n.length&&c.append('<div class="chart-empty"><img src="'+e.sites["static"]+'/v3/image/ea/chart-showNot-learning.png" alt=""><p class="not-text">暂无人标记错因</p></div>').addClass("not-chart"),c.append('<div class="chart-center"><i class="iconfont '+r[a.id-1]+'"></i>'+a.key+"</div>")},e.each(a,function(t){n(t)})},t(document).delegate(".d-chart-center","mouseenter",function(){t(this).parents(".highcharts-data-labels").next().show()}),t(".ui-tab-nav li").bind("click",function(){var n=t(this),i=n.data("area");return n.hasClass("on")?!1:(n.addClass("on").siblings().removeClass("on"),s.hasOwnProperty(i)?(a(s[i]),!1):(e.pageLoading(),void o(i)))}),e.pageLoading(),o(0)}(jQuery,SINGER);