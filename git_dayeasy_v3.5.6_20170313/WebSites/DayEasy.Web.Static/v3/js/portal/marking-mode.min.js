!function(n,i){var e,t,o=n(".choice-mode"),a=n("#btnSubmit"),s=i.uri().joint;t=function(t){return i.isUndefined(e)||0>e||e>1?(i.alert("请选择阅卷方式！",function(){t&&i.isFunction(t)&&t.call(this)}),!1):void n.post("/marking/set-mode",{joint:s,mode:e},function(n){n.status?location.href="/marking/mission?joint="+s:i.alert(n.message,function(){t&&i.isFunction(t)&&t.call(this)})})},o.bind("click",function(){var i=n(this);return i.hasClass("on")?!1:(o.removeClass("on"),i.addClass("on"),a.undisableFieldset(),void(e=o.index(i)))}),a.bind("click",function(){if(i.isUndefined(e)||0>e||e>1)return i.alert("请选择阅卷方式！"),!1;var a=n('<div class="dm-choice">'),s=o.eq(e);a.append(s.find("img").clone()),a.append(i.format('<p>确认选择{0}吗？<span class="text-danger">确认后将不能修改！</span></p>',s.find("strong")[0].outerHTML)),i.dialog({title:"批阅方式确认",content:a,okValue:"确认",ok:function(){var i=n(this.node).find('[data-id="ok"]');return i.disableField("提交中..."),t(function(){i.undisableFieldset()}),!1},cancelValue:"取消",cancel:function(){this.close().remove()}}).showModal()})}(jQuery,SINGER);