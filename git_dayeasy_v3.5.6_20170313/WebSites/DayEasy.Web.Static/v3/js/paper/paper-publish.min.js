!function(e,t){var a=function(t,a,r){e.ajax({url:t,type:"Post",data:a,xhrFields:{withCredentials:!0},success:function(e){r.call(this,e)}})},r=function(t){var r=e("#paperId").val();a(singer.sites.apps+"/paper/publishpapers",{pageIndex:t,paperId:r},function(t){e("#paperList").empty(),t.Status&&t.Data?(e.each(t.Data,function(t,a){var r='<label class="checkbox-group group-radio"><input type="radio" name="options" class="paperItem" value="'+a.PaperId+'"><span>'+a.PaperName+"<em>"+a.Time+'</em></span><i class="iconfont dy-icon-radio"></i></label>';e("#paperList").append(r)}),t.TotalCount<=4?(1===t.TotalCount&&e("#paperList .group-radio input").click(),e("#pageButton").addClass("hide")):e("#pageButton").removeClass("hide"),e("#pageButton").attr("data-totalcount",t.TotalCount)):e("#paperList").append('<label class="checkbox-group group-radio">没有找到要发布的试卷！</label>')})};r(1),e("#pageButton a").click(function(){var t=parseInt(e("#pageIndex").val());isNaN(t)&&(t=1);var a=t,n=e(this).index();0===n?a-=1:a+=1,1>a&&(a=1);var i=e("#pageButton").data("totalcount"),s=Math.ceil(i/4);return a>s&&(a=s),a==t?!1:(e("#pageIndex").val(a),void r(a))}),e("#btn_sure").click(function(){var t=e(this),r=e(".paperItem:checked").val(),n=e("#otherMsg").val(),i=[];t.blur();var s=e(".groupItem:checked");if(e.each(s,function(t,a){i.push(e(a).val())}),!e.trim(r))return e("#errorMsg").text("请先选择要推送的试卷！"),window.setTimeout(function(){e("#errorMsg").text("")},2e3),!1;if(i.length<1)return e("#errorMsg").text("请先选择要推送的圈子！"),window.setTimeout(function(){e("#errorMsg").text("")},2e3),!1;var o=e("#groupId").val();return t.disableField("提交中..."),a(singer.sites.apps+"/paper/pubpaper",{pId:r,sendMsg:n,groupIds:JSON.stringify(i),sourceGId:o},function(a){if(a.Status){var r=singer.dialog.getCurrent();r.close().remove(),singer.msg(a.Data)}else e("#errorMsg").text(a.Message),window.setTimeout(function(){e("#errorMsg").text("")},2e3);t.undisableFieldset()}),!1})}(jQuery,SINGER);