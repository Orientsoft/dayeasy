!function(e){e.fn.autoMail=function(i){var n=e.extend({},e.fn.autoMail.defaults,i);return this.each(function(){function i(i){e("#mailBox li").removeClass("cmail").eq(i).addClass("cmail")}var l=e(this),o=e.meta?e.extend({},n,l.data()):n,t=l.offset().top+l.height()+6,a=l.offset().left,f=e('<div id="mailBox" style="top:'+t+"px;left:"+a+"px;width:"+l.width()+'px"></div>');e("body").append(f);var h=o.emails,d=function(i){if(i.attr("autocomplete","off"),""!=i.val()){for(var n="<p>请选择邮箱类型</p><ul>",l=0;l<h.length;l++)n+="<li>"+i.val()+"@"+h[l]+"</li>";n+="</ul>",f.html(n).show(0)}else f.hide(0);e("#mailBox li").hover(function(){e("#mailBox li").removeClass("cmail"),e(this).addClass("cmail")},function(){e(this).removeClass("cmail")}).click(function(){i.val(e(this).html()),o.onChange&&"function"==typeof o.onChange&&o.onChange.call(this),f.hide(0)})},u=-1;l.focus(function(){-1==l.val().indexOf("@")?d(l):f.hide(0)}).blur(function(){setTimeout(function(){f.hide(0)},1e3)}).keyup(function(n){-1==l.val().indexOf("@")?40==n.keyCode?(u++,u>=e("#mailBox li").length&&(u=0),i(u)):38==n.keyCode?(u--,0>u&&(u=e("#mailBox li").length-1),i(u)):13==n.keyCode?u>=0&&(l.val(e("#mailBox li").eq(u).html()),o.onChange&&"function"==typeof o.onChange&&o.onChange.call(this),f.hide(0)):(u=-1,d(l)):f.hide(0)}).keydown(function(e){return 13==e.keyCode?!1:void 0})})},e.fn.autoMail.defaults={emails:[],onChange:void 0}}(jQuery);