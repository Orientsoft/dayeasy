!function(e,t){var a,n,s,i="__dayeasy_exams",d=t.json(t.cookie.get(i))||[],l=e("#createBtn");t.getLogger("union-create");if(d.length>0){for(a=0;a<d.length;a++){var c=e('tr[data-eid="'+d[a]+'"');c.length>0&&c.addClass("selected").find('input[name="ckbJoint"]').attr("checked","checked")}e(".dy-actions em").html(d.length),d.length>1&&l.removeClass("disabled").removeAttr("disabled")}n=function(){d=[],t.cookie.set(i,t.json(d)),l.addClass("disabled").attr("disabled","disabled"),e(".dy-actions em").html(d.length),e(".dy-table-wrap tr").removeClass("selected").find('input[name="ckbJoint"]').removeAttr("checked")},e(".dy-table-wrap tr").bind("click",function(n){var s,c,o=e(this);if(s=!o.hasClass("selected"),o.toggleClass("selected"),c=o.data("eid"),o.find('input[name="ckbJoint"]').get(0).checked=s,s)d.push(c);else for(a=0;a<d.length;a++)if(d[a]===c){d.splice(a,1);break}t.cookie.set(i,t.json(d)),e(".dy-actions em").html(d.length),d.length<2?l.addClass("disabled").attr("disabled","disabled"):l.removeClass("disabled").removeAttr("disabled")}),e(".b-clear").bind("click",function(){n(),e(this).blur()}),s=function(a,s){e.post("/exam/add-union",a,function(e){e.status?t.alert("创建关联成功！",function(){n(),location.href="/exam/unions"}):t.alert(e.message,function(){s&&s.call(this)})})},l.bind("click",function(){if(l.hasClass("disabled"))return!1;if(d.length<2)return t.alert("请选择至少两次大型考试！"),!1;var e={examIds:d};l.disabled("稍后.."),s(e,function(){l.unDisabled()})})}(jQuery,SINGER);