!function(t,i){t(".j-update").bind("click",function(){var n=t(this),r=n.parents("tr"),o=n.data("priority"),a=r.data("mid");return t.post("/missions/update",{id:a,priority:o},function(t){return t&&t.status?(i.msg("更新成功"),r.find("td:eq(3)").html(o),n.data("priority",o+1),!1):void i.alert(t.message||"更新失败")}),!1}),t(".j-reset").bind("click",function(){var n=t(this).parents("tr"),r=n.data("mid");return i.confirm("确认要重置该异步任务？",function(){t.post("/missions/reset",{id:r},function(t){return t&&t.status?(i.msg("重置成功",2e3,function(){location.reload(!0)}),!1):void i.alert(t.message||"更新失败")})}),!1}),t(".d-params").bind("click",function(){var n=t(this).html(),r=i.dialog({title:"任务参数",skin:"d-dialog",width:600,height:350}).showModal();return r.content(new JsonFormat(n).toString()),!1}),t(".j-logs").bind("click",function(){var n=t(this).next(),r=n.html().replace(/\n/g,"<br/>"),o=i.dialog({title:"任务日志",skin:"d-dialog",width:600,height:350}).showModal();return o.content(r),!1})}(jQuery,SINGER);