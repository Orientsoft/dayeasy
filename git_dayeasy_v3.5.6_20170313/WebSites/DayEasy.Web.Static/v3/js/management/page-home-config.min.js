var indexConfig=function(e,t){var a={data:{},seed:1e3,maxSectionLen:6,maxTabLen:4,sources:[],sourceLen:4,getSeed:function(e){return e=e||"S",e+ ++a.seed},init:function(){e.post("/operate/home-config/data",{},function(t){a.data=t.data,e(".coverages-num").html(a.data.coverages.length),e(".resources-num").html(a.data.resources.length),a.data.examples&&(e(".left-num").html(a.data.examples.left.length),e(".right-num").html(a.data.examples.right.length))})},checkAdver:function(n){var r,s=n.parent().data("type"),o=[],c=0;switch(s){case"coverages":o=a.data.coverages,a.sourceLen=30,r=e(".coverages-num");break;case"resources":o=a.data.resources,a.sourceLen=9,r=e(".resources-num");break;case"left":o=a.data.examples.left,a.sourceLen=4,r=e(".left-num");break;case"right":o=a.data.examples.right,a.sourceLen=1,r=e(".right-num");break;default:return t.msg("类型无效"),!1}if(a.sources=[],o&&o.length)for(c=0;c<o.length;c++)a.sources.push({id:o[c],name:""});e.get("/operate/advert?partial=1",{},function(e){t.dialog({title:"选择图文广告",content:e,okValue:"确定",cancelValue:"取消",ok:function(){if(o.splice(0,o.length),a.sources&&a.sources.length)for(c=0;c<a.sources.length;c++)o.push(a.sources[c].id);r.text(o.length)},cancel:function(){},width:800,height:410}).showModal()})},getItemById:function(e,t){if(!e||!e.length||!t)return 0;for(var a=0;a<e.length;a++)if(t==e[a].id)return e[a]},save:function(n){return!a.data.resources||!a.data.resources.length||a.data.resources.length<3||a.data.resources.length>9?(t.msg("资源干货模块需要3-9条图文数据"),void(n&&n.call(null))):a.data.examples&&4==a.data.examples.left.length?!a.data.examples||a.data.examples.right.length<=0?(t.msg("榜样力量右边需要1条图文数据"),void(n&&n.call(null))):void e.post("/operate/home-config/save",{data:t.json(a.data)},function(e){return n&&n.call(null),e.status?void t.msg("保存成功"):void t.alert(e.message)}):(t.msg("榜样左边模块需要4条图文数据"),void(n&&n.call(null)))}};return a}(jQuery,SINGER);!function(e,t,a){a.init(),e(".ic-box").delegate(".ic-check","click",function(){var t=e(this);return t.data("group")?void a.checkGroup(t):void a.checkAdver(t)}),e("#btnSave").bind("click",function(){var t=e(this);t.disabled("稍后.."),a.save(function(){t.unDisabled()})})}(jQuery,SINGER,indexConfig);